<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="acccount_invoice_form_view" model="ir.ui.view">
			<field name="name">account.invoice.form</field>
			<field name="model">account.invoice</field>
			<field name="priority" eval="10" />
			<field name="inherit_id" ref="account.invoice_form" />
			<field name="arch" type="xml">
				<xpath expr="//button[@name='action_invoice_open']" position="after">
					<button name="action_create_picking" string="Crear Picking"
						type="object" class="oe_highlight"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						attrs="{'invisible':['|', '|', ('create_picking', '=', False), ('picking_ids', '!=', []), ('state', 'not in', ('open', 'paid'))]}" />
				</xpath>
				<xpath expr="//field[@name='user_id']" position="after">
					<field name="create_picking"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						attrs="{'invisible':[('state', 'not in', ('open', 'paid'))], 'readonly':[('picking_ids', '!=', [])]}" />
					<field name="picking_type_id"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						options="{'no_create': True}"
						context="{'filter_picking_type_from_invoice': type}"
						attrs="{'invisible':['|', ('create_picking', '=', False), ('state', 'not in', ('open', 'paid'))], 'readonly':['|', ('picking_ids', '!=', []), ('state', 'not in', ('open', 'paid'))], 'required':[('create_picking', '=', True), ('state', 'in', ('open', 'paid'))]}" />
					<field name="stock_move_date"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						attrs="{'invisible':['|', ('create_picking', '=', False), ('state', 'not in', ('open', 'paid'))], 'readonly':['|', ('picking_ids', '!=', []), ('state', 'not in', ('open', 'paid'))]}" />
				</xpath>
			</field>
		</record>

		<record id="acccount_invoice_supplier_form_view" model="ir.ui.view">
			<field name="name">account.invoice.form</field>
			<field name="model">account.invoice</field>
			<field name="priority" eval="10" />
			<field name="inherit_id" ref="account.invoice_supplier_form" />
			<field name="arch" type="xml">
				<xpath
					expr="//button[@name='%(account.action_account_invoice_payment)d']"
					position="after">
					<button name="action_create_picking" string="Crear Picking"
						type="object" class="oe_highlight"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						attrs="{'invisible':['|', '|', ('create_picking', '=', False), ('picking_ids', '!=', []), ('state', 'not in', ('open', 'paid'))]}" />
				</xpath>
				<xpath expr="//field[@name='company_currency_id']" position="after">
					<field name="create_picking"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						attrs="{'invisible':[('state', 'not in', ('open', 'paid'))], 'readonly':[('picking_ids', '!=', [])]}" />
					<field name="picking_type_id"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						options="{'no_create': True}"
						context="{'filter_picking_type_from_invoice': type}"
						attrs="{'invisible':['|', ('create_picking', '=', False), ('state', 'not in', ('open', 'paid'))], 'readonly':['|', ('picking_ids', '!=', []), ('state', 'not in', ('open', 'paid'))], 'required':[('create_picking', '=', True), ('state', 'in', ('open', 'paid'))]}" />
					<field name="stock_move_date"
						groups="stock_picking_from_invoice.group_picking_from_invoice"
						attrs="{'invisible':['|', ('create_picking', '=', False), ('state', 'not in', ('open', 'paid'))], 'readonly':['|', ('picking_ids', '!=', []), ('state', 'not in', ('open', 'paid'))]}" />
				</xpath>
			</field>
		</record>
	</data>
</odoo>