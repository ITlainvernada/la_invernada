<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="report_dispatch_guide">
        <t t-call="web.html_container">
            <div class="page" style="margin:auto;">
                <t t-foreach="docs" t-as="d">
                    <div style="width:100%;">
                        <div style="width:33.3%;display:inline-block;">
                            <img t-att-src="'data:image/png;base64,%s' % to_text(res_company.logo)"
                                 style="height:75px;"
                            />
                        </div>
                        <div style="width:33.3%;display:inline-block;">
                            <table style="margin: 0 auto;font-size:12px;">
                                <tr>
                                    <td style="text-align:center;">
                                        <span t-field="res_company.name"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center;">
                                        <span t-field="res_company.street"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:center;">
                                        <span t-field="res_company.city"/>
                                        <span t-field="res_company.country_id"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div style="width:32.3%;display:inline-block;">
                            <table style="border:3px solid;">
                                <tr>
                                    <td style="text-align:center;">
                                        R.U.T
                                        <span t-field="res_company.invoice_rut"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td style="text-align:center;">
                                        GUIA DE DESPACHO ELECTRONICA
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td style="text-align:center;">
                                        N°
                                        <span t-field="d.dispatch_guide_number"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <br/>
                    <div style="width:100%;height:10px;font-size:12px;"/>
                    <br/>
                    <span style="text-align:left;font-size:12px;" t-esc="d.create_date.date()"/>
                    <div style="width:100%;margin:0 auto;border:1px solid;">
                        <table style="width:90%;margin 0 auto;font-size:11px;" cellspacing="8">
                            <tr>
                                <tr>
                                    <td>
                                        <strong>SEÑOR(ES):</strong>
                                    </td>
                                    <td style="text-align:left;">
                                        <span t-field="d.partner_id"/>
                                    </td>
                                    <td style="text-align:left;">
                                        <strong>R.U.T:</strong>
                                    </td>
                                    <td style="text-align:left;">
                                        <span t-esc="d.partner_id.invoice_rut"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:left;">
                                        <strong>DIRECCION:</strong>
                                    </td>
                                    <td style="text-align:left;">
                                        <span t-field="d.partner_id.street"/>
                                    </td>
                                    <td style="text-align:left;">
                                        <strong>TELEFONO:</strong>
                                    </td>
                                    <td style="text-align:left;">
                                        <span t-field="d.partner_id.phone"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align:left;">
                                        <strong>COMUNA:</strong>
                                    </td>
                                    <td style="text-align:left;">
                                        <span t-field="d.partner_id.state_id"/>
                                    </td>
                                    <td style="text-align:left;">
                                        <strong>VENCTO:</strong>
                                    </td>
                                    <td style="text-align:left;"><![CDATA[&nbsp;]]></td>
                                </tr>
                                <tr>
                                    <td style="text-align:left;">
                                        <strong>GIRO:</strong>
                                    </td>
                                    <td style="text-align:left;"><![CDATA[&nbsp;]]></td>
                                    <td style="text-align:left;">
                                        <strong>COND.PAGO:</strong>
                                    </td>
                                    <td style="text-align:left;"><![CDATA[&nbsp;]]></td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>TIPO DE TRASLADO:</strong>
                                    </td>
                                    <td>
                                        <span t-field="d.type_of_transfer"/>
                                    </td>
                                </tr>
                            </tr>
                        </table>
                    </div>
                    <div style="width:100%;margin:0 auto;height:583px;border:1px solid;">
                        <table style="width:100%;font-size:11px;">
                            <th style="width:20%;border-right:1px solid;border-bottom:1px solid;">CANTIDAD</th>
                            <th style="width:60%;border-right:1px solid;border-bottom:1px solid;border-left:1px solid;">
                                DETALLES
                            </th>
                            <th style="width:20%;border-bottom:1px solid;border-left:1px solid;">VALOR UNITARIO</th>
                            <t t-foreach="d.move_ids_without_package" t-as="m">
                                <tr>
                                    <td style="width:20%;border-right:1px solid;border-bottom:1px solid;">
                                        <t t-esc="'{0:,.2f}'.format(int(m.quantity_done))"/>
                                    </td>
                                    <td style="width:20%;border-right:1px solid;border-bottom:1px solid;border-left:1px solid;text-align:center;">
                                        <span t-field="m.product_id"/>
                                    </td>
                                    <td style="width:20%;border-left:1px solid;border-bottom:1px solid;text-align:center;">
                                        <span t-field="m.product_id.lst_price"/>
                                    </td>
                                    <t t-if="m.id == d.move_ids_without_package[-1].id">
                                        <tr>
                                            <td colspan="3">
                                                <t t-if="d.type_of_dispatch == 'exp'">
                                                    <table style="font-size:11px;">
                                                        <tr>
                                                            <td style="text-align:center;">
                                                                KILOS NETOS
                                                            </td>
                                                            <td>
                                                                <span t-field="d.net_weight_dispatch"/>
                                                            </td>
                                                            <td>N° CONTENEDOR</td>
                                                            <td>
                                                                <span t-field="d.container_number"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>KILOS BRUTOS:</td>
                                                            <td>
                                                                <span t-field="d.gross_weight_dispatch"/>
                                                            </td>
                                                            <td>SELLO NAVIERA</td>
                                                            <td>
                                                                <span t-field="d.sell_shipping"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>TARA CONTE:</td>
                                                            <td>
                                                                <span t-field="d.tare_container_weight_dispatch"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>PESO VGM:</td>
                                                            <td>
                                                                <span t-field="d.vgm_weight_dispatch"/>
                                                            </td>
                                                        </tr>
                                                        <tr style="height:50%;">
                                                            <td>Nota</td>
                                                            <td colspan="3" style="text-align:center;">
                                                                <t t-esc="d.note_dispatched.get_full_note()"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Nave:</td>
                                                            <td>
                                                                <t t-if="d.shipping_id.type_transport == 'terrestre'">
                                                                    <span t-field="d.type_transport"/>
                                                                </t>
                                                                <t t-elif="d.shipping_id.type_transport != 'terrestre'">
                                                                    <span t-field="d.shipping_id.ship"/>
                                                                </t>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>N° DUS:</td>
                                                            <td>
                                                                <span t-field="d.dus_number"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>PTO EMBARQUE:</td>
                                                            <td>
                                                                <span t-field="d.shipping_id.departure_port"/>
                                                            </td>
                                                            <td>SELLO INVERNADA</td>
                                                            <td>
                                                                <span t-field="d.sell_truck"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>PTO DESCARGA</td>
                                                            <td>
                                                                <span t-field="d.shipping_id.arrival_port"/>
                                                            </td>
                                                            <td>N° RESERVA</td>
                                                            <td>
                                                                <span t-field="d.booking_number"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>TRANSPORTE:</td>
                                                            <td>
                                                                <span t-field="d.transport"/>
                                                            </td>
                                                            <td>CANDADO GPS:</td>
                                                            <td>
                                                                <span t-field="d.gps_lock"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>CHOFER:</td>
                                                            <td>
                                                                <span t-field="d.carrier_id"/>
                                                            </td>
                                                            <td>BOTON GPS:</td>
                                                            <td>
                                                                <span t-field="d.gps_button"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>RUT:</td>
                                                            <td>
                                                                <span t-field="d.carrier_rut"/>
                                                            </td>
                                                            <td>CLIENTE:</td>
                                                            <td>
                                                                <span t-field="d.partner_id"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>CELULAR:</td>
                                                            <td>
                                                                <span t-field="d.carrier_cell_phone"/>
                                                            </td>
                                                            <td>SELLO SAG:</td>
                                                            <td>
                                                                <span t-field="d.sell_sag"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><![CDATA[&nbsp;]]></td>
                                                            <td><![CDATA[&nbsp;]]></td>
                                                            <td>N° Pedido:</td>
                                                            <td>
                                                                <span t-field="d.name"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <![CDATA[&nbsp;]]>
                                                        </tr>
                                                        <tr>
                                                            <td>Pte Camion:</td>
                                                            <td>
                                                                <span t-field="d.carrier_truck_patent"/>
                                                            </td>
                                                            <td>Hora Llegada:</td>
                                                            <td>
                                                                <t t-esc="'%02d:%02d' % (int(d.hour_arrival),d.hour_arrival % 1 * 60)"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>Pte Rampla:</td>
                                                            <td>
                                                                <span t-field="d.carrier_cart_patent"/>
                                                            </td>
                                                            <td>Hora Salida</td>
                                                            <td>
                                                                <t t-esc="'%02d:%02d' % (int(d.hour_departure),d.hour_departure % 1 * 60)"/>
                                                            </td>

                                                        </tr>
                                                    </table>
                                                </t>
                                            </td>
                                        </tr>
                                    </t>
                                </tr>
                            </t>
                        </table>

                    </div>
                    <t t-if="d.type_of_dispatch == 'exp'">
                        <span t-esc="d.note_dispatched.get_footer_note()" style="font-size:12px;"/>
                    </t>
                    <div style="width:100%;height:18.5%;">

                    </div>
                    <div style="width:100%;height:5%;border:1px solid;">
                        <table style="font-size:11px;">
                            <tr>
                                <td>Nombre:</td>
                                <td style="border-bottom:1pt dotted black;width:50%;"></td>
                                <td>Rut:</td>
                                <td style="border-bottom:1pt dotted black;width:50%;"></td>
                            </tr>

                            <tr>
                                <td>Recinto:</td>
                                <td style="border-bottom:1pt dotted black;width:50%;"></td>
                            </tr>
                            <tr>
                                <td>Fecha:</td>
                                <td style="border-bottom:1pt dotted black;width:50%;"></td>
                                <td>Firma:</td>
                                <td style="border-bottom:1pt dotted black;width:50%;"></td>
                            </tr>
                        </table>
                    </div>
                    <span style="style='page-break-before:avoid;'"/>
                </t>
            </div>
        </t>
    </template>

    <template id="report_weight_dispatch">
        <t t-call="web.html_container">
            <div class="page">
                <t t-foreach="docs" t-as="dis">
                    <table style="width:100%;border:1px solid;">
                        <th style="border-right:1px solid;width:50px;">
                            <img t-att-src="'data:image/png;base64,%s' % to_text(res_company.logo)"
                                 style="height:50px;"
                            />
                        </th>
                        <th style="margin:0 auto;border-right:1px solid;">
                            REGISTRO INFORME DE DESPACHO
                        </th>
                        <th style="width:60px;">
                            <table>
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </table>
                        </th>
                    </table>
                    <br/>
                    <table style="width:100%;height:20%;font-size:18px;" cellspacing="3">
                        <tr style="height:25px;">
                            <td style="text-align:center;">NUMERO DE EMBARQUE</td>
                            <td style="border:1px solid;width:25%;text-align:center;">
                                <span t-field="dis.shipping_number"/>
                            </td>
                            <td></td>
                            <td style="text-align:center;">PATENTE CAMION</td>
                            <td style="border:1px solid;width:25%;text-align:center;">
                                <span t-field="dis.truck_id"/>
                            </td>
                        </tr>
                        <tr style="height:25px;">
                            <td style="text-align:center;">GUIA DE DESPACHO</td>
                            <td style="border:1px solid;width:25%;text-align:center;">
                                <span t-field="dis.dispatch_guide_number"/>
                            </td>
                            <td></td>
                            <td style="text-align:center;">PATENTE CARRO</td>
                            <td style="border:1px solid;width:25%;text-align:center;">
                                <span t-field="dis.cart_id"/>
                            </td>
                        </tr>
                        <tr style="height:25px;">
                            <td style="text-align:center;">NUMERO DE CONTENEDOR</td>
                            <td style="border:1px solid;width:25%;text-align:center;">
                                <span t-field="dis.container_number"/>
                            </td>
                            <td></td>
                            <td style="text-align:center;">RUN CHOFER</td>
                            <td style="border:1px solid;width:25%;text-align:center;">
                                <span t-field="dis.carrier_rut"/>
                            </td>
                        </tr>
                        <tr style="height:25px;">
                            <td style="text-align:center;">NOMBRE CHOFER</td>
                            <td style="border:1px solid;width:25%;text-align:center;">
                                <span t-field="dis.container_number"/>
                            </td>
                        </tr>
                    </table>
                    <br/>
                    <table style="border:1px solid;width:100%;" cellspacing="3">
                        <th style="text-align:center;">
                            <td colspan="2">PESAJES</td>
                        </th>
                        <tr>
                            <td style="text-align:center;width:50%;">PESO SIN CARGA</td>
                            <td style="border:1px solid;width:50%;margin:0 auto;text-align:center;">
                                <span t-esc="int(dis.arrival_weight)"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:center;width:50%;">PESO CON CARGA</td>
                            <td style="border:1px solid;width:50%;margin:0 auto;text-align:center;">
                                <span t-esc="int(dis.departure_weight)"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align:center;width:50%;">PESO NETO</td>
                            <td style="border:1px solid;width:50%;margin:0 auto;text-align:center;">
                                <span t-esc="int(dis.net_weight_dispatch)"/>
                            </td>
                        </tr>
                    </table>
                    <br/>
                    <br/>
                    <table style="float:left;">
                        <tr>
                            <td style="border-bottom:1pt dotted black;width:50%;"></td>
                        </tr>
                        <tr style="margin:0 auto;width:200px;text-align:center;">
                            <td>Firma Chofer</td>
                        </tr>
                    </table>
                    <table style="float:right;">
                        <tr>
                            <td style="border-bottom:1pt dotted black;width:50%;"></td>
                        </tr>
                        <tr style="margin:0 auto;width:200px;text-align:center;">
                            <td>Encargado de Despacho</td>
                        </tr>
                    </table>
                </t>
            </div>
        </t>
    </template>

    <template id="report_truck_dispatch">
        <t t-call="web.html_container">
            <div class="page">
                <t t-foreach="docs.sorted(key=lambda x: x.counter)" t-as="o">
                    <t t-if="o.counter == 3 or o.counter == 6 or o.counter == 9">
                        <img t-att-src="'data:o.mimetype;base64,%s' % to_text(o.datas)"
                        />
                        <br/>
                    </t>
                    <t t-else="">
                        <img t-att-src="'data:o.mimetype;base64,%s' % to_text(o.datas)"
                        />
                    </t>
                    <t t-if="docs[-1].id == o.id">
                        <span style="style='page-break-before:avoid;'"/>
                    </t>
                </t>
            </div>
        </t>
    </template>

    <template id="report_packing_list">
        <t t-call="web.html_container">
            <div class="page">
                <div class="oe_structure"/>
                <t t-foreach="docs" t-as="d">
                    <table width="100%%">
                        <th style="width:50px;">
                            <img t-att-src="'data:image/png;base64,%s' % to_text(res_company.logo)"
                                 style="height:50px;"
                            />
                        </th>
                        <th style="font-size:20px;">
                            <strong>Packing List</strong>
                        </th>
                    </table>
                    <br/>
                    <table width="45%%" style="border:solid 1px;font-size:12px;display:inline-block;">
                        <tr>
                            <td>
                                <strong>SHIPPER/PROVEEDOR:</strong>
                            </td>
                            <td>
                                <span t-field="res_company.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>ADDRESS/DIRRECCION:</strong>
                            </td>
                            <td rowspan="2">
                                <span t-field="res_company.street"/>
                                <br/>
                                <span t-field="res_company.country_id"/>
                            </td>
                        </tr>
                        <tr></tr>
                        <tr>
                            <td>
                                <strong>PHONE/TELEFONO:</strong>
                            </td>
                            <td>
                                <span t-field="res_company.phone"/>
                            </td>
                        </tr>
                    </table>
                    <table width="50%%" style="border:solid 1px;font-size:12px;display:inline-block;">
                        <tr>
                            <td>
                                <strong>CONSIGNEE/CONSIGNATARIO:</strong>
                            </td>
                            <td>
                                <span t-field="d.consignee_id.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>ADDRESS/DIRRECCION:</strong>
                            </td>
                            <td rowspan="2">
                                <span t-field="d.consignee_id.street"/>
                                <br/>
                                <span t-field="d.consignee_id.country_id"/>
                            </td>
                        </tr>
                        <tr></tr>
                        <tr>
                            <td>
                                <strong>PHONE/TELEFONO:</strong>
                            </td>
                            <td>
                                <span t-field="d.consignee_id.phone"/>
                            </td>
                        </tr>
                    </table>
                    <br/>
                    <table width="45%%" style="border:solid 1px;font-size:12px;display:inline-block;">
                        <tr>
                            <td>
                                <strong>VESSEL/NAVE:</strong>
                            </td>
                            <td>
                                <span t-field="d.shipping_id.ship.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>PORT OF LOADING:</strong>
                            </td>
                            <td>
                                <span t-field="d.shipping_id.departure_port.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>PORT OF DISCHARGE:</strong>
                            </td>
                            <td>
                                <span t-field="d.shipping_id.arrival_port.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>CONTAINER:</strong>
                            </td>
                            <td>
                                <span t-field="d.container_number"/>
                            </td>
                        </tr>
                    </table>
                    <table width="50%%" style="border:solid 1px;font-size:12px;display:inline-block;">
                        <tr>
                            <td>
                                <strong>NOTIFY/NOTIFICADO:</strong>
                            </td>
                            <td>
                                <span t-field="d.notify_ids[0].name"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>ADDRESS/DIRRECCION:</strong>
                            </td>
                            <td rowspan="2">
                                <span t-field="d.notify_ids[0].street"/>
                                <br/>
                                <span t-field="d.notify_ids[0].country_id"/>
                            </td>
                        </tr>
                        <tr></tr>
                        <tr>
                            <td>
                                <strong>PHONE/TELEFONO:</strong>
                            </td>
                            <td>
                                <span t-field="d.notify_ids[0].phone"/>
                            </td>
                        </tr>
                    </table>
                    <br/>
                    <table width="45%%" style="border:solid 1px;font-size:12px;display:inline-block;">
                        <tr rowspan="2">
                            <td>ORDER N°/N° DE ORDER</td>
                            <td>
                                <span t-field="d.name"/>
                            </td>
                        </tr>
                        <tr></tr>
                    </table>
                    <table width="50%%" style="border:solid 1px;font-size:12px;display:inline-block;">
                        <tr rowspan="2">
                            <td style="text-align:center;">CLIENT PURCHASE ORDER/ORDER DE COMPRA CLIENTE</td>
                            <td style="text-align:center;">
                                <span t-field="d.origin"/>
                            </td>
                        </tr>
                        <tr></tr>
                    </table>
                    <br/>
                    <table style="width:100%;height:355px;border:solid 1px black;font-size:8.5px;">
                        <theader>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>ITEM/PRODUCT</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>TYPE OF PRODUCT/TIPO DE PRODUCTO</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>TICKET N°/TRACE CODE</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>PALLET NUMBER/FOLIO PALLET</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>PACKING DATE/FECHA ELAB.</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>BEST BEFORE DATE/FECHA VENCIMIENTO</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>PACKING AMOUNT/N° DE ENVASES</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>PACKING TYPE/ TYPE DE EMPAQUE</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>NET WEIGHT / PESO NETO</strong>
                            </th>
                            <th style="text-align:center;border:solid 1px black;width:70%;" scope="col">
                                <strong>GROSS WEIGHT / PESO BRUTO</strong>
                            </th>
                        </theader>
                        <tbody>
                            <t t-foreach="d.assigned_pallet_ids" t-as="p">
                                <tr>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-esc="p.lot_serial_ids[0].product_id.name"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-esc="p.lot_serial_ids[0].product_id.type_product"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-field="d.name"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-field="p.name"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-esc="p.lot_serial_ids[0].packaging_date.strftime('%d-%b-%y')"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-esc="p.lot_serial_ids[0].best_before_date.strftime('%d-%b-%y')"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-field="p.total_content"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">

                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-esc="'%.2f' %sum(p.lot_serial_ids.mapped('display_weight'))"/>
                                    </td>
                                    <td style="border:solid 1px black;text-align:center;padding-top:0px;padding-bottom:0px">
                                        <span t-esc="'%.2f' %sum(p.lot_serial_ids.mapped('gross_weight'))"/>
                                    </td>
                                </tr>
                                <t t-if="p.id == d.assigned_pallet_ids[-1].id">
                                    <tr>
                                        <td colspan="6" style="text-align:right;">
                                            Total
                                        </td>
                                        <td style="text-align:center;">
                                            <span t-esc="sum(d.assigned_pallet_ids.mapped('total_content'))"/>
                                        </td>
                                        <td></td>
                                        <td style="border:solid 1px black;text-align:center;margin_top:0px;margin_bottom;0px;margin_left:0px;margin_right:0px;">
                                            <span t-esc="'%.2f' %sum(d.assigned_pallet_ids.mapped('lot_serial_ids').mapped('display_weight'))"/>
                                        </td>
                                        <td style="border:solid 1px black;text-align:center;margin_top:0px;margin_bottom;0px;margin_left:0px;margin_right:0px;">
                                            <span t-esc="'%.2f' %sum(d.assigned_pallet_ids.mapped('lot_serial_ids').mapped('gross_weight'))"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </t>
            </div>
        </t>
    </template>

    <record id="paper_format_letter_custom" model="report.paperformat">
        <field name="name">Carta Custom</field>
        <field name="default" eval="False"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">0</field>
        <field name="margin_left">15</field>
        <field name="margin_right">15</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="footer_line" eval="False"/>
        <field name="dpi">90</field>
    </record>

    <record id="paper_format_letter_horizontal" model="report.paperformat">
        <field name="name">Carta Horizontal</field>
        <field name="default" eval="False"/>
        <field name="format">Letter</field>
        <field name="orientation">Landscape</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">0</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="footer_line" eval="False"/>
        <field name="dpi">90</field>
    </record>

    <report id="action_packing_list" model="stock.picking" paperformat="paper_format_letter_horizontal"
            report_type="qweb-pdf"
            name="dimabe_export_order.report_packing_list" string="Packing List"/>


    <report id="action_dispatch_weight_dispatch" string="Ticket Pesaje Despacho" model="stock.picking"
            report_type="qweb-pdf"
            name="dimabe_export_order.report_weight_dispatch" menu="True" paperformat="paper_format_letter_horizontal"/>
    <report id="action_dispatch_guide_report" string="Guia de despacho" model="stock.picking" report_type="qweb-pdf"
            name="dimabe_export_order.report_dispatch_guide" menu="True" paperformat="paper_format_letter_custom"
    />
    <report id="action_dispatch_label_report" string="Informe despacho" model="ir.attachment" report_type="qweb-pdf"
            name="dimabe_export_order.report_truck_dispatch" paperformat="paper_format_letter_custom"/>
</odoo>
