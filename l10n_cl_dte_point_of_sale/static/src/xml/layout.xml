<?xml version="1.0" encoding="utf-8"?>

<templates id="template" inherit_id="point_of_sale.template">
	<t t-name="PosTicketHeader">
		<div style="text-align:center;">
			<b>
				<t t-esc="widget.pos.company.name" />
			</b>
			<br />
			<b>
				R.U.T.:
				<t t-esc="widget.pos.company.document_number" />
			</b>
			<t t-if="receipt.header">
				<br />
				<div style='text-align:center'>
					<t t-esc="receipt.header" />
				</div>
			</t>
		</div>
		<strong>Casa Matriz: </strong>
		<t t-esc="widget.pos.company.street" />
		<t t-esc="widget.pos.company.city || ''" />
		<br />
		<strong>Giro: </strong>
		<t t-esc="widget.pos.company.activity_description[1]" />
		<t
			t-if="widget.pos.config.address_street or widget.pos.config.address_city">
			<br />
			<strong>Sucursal: </strong>
			<span
				t-esc="widget.pos.config.address_street and widget.pos.config.address_street or ''" />
			.
			<span
				t-esc="widget.pos.config.address_city and widget.pos.config.address_city or ''" />
		</t>
		<t t-if="widget.pos.config.caja_number">
			<br />
			<strong>Caja: </strong>
			<span t-esc="widget.pos.config.caja_number" />
		</t>
		<br />
		<strong>Fecha: </strong>
		<span t-esc="order.formatted_validation_date" />
		<br />
		<t t-if="order.sii_document_number">
			<strong>
				<t t-esc="receipt.nombre_documento" />
			</strong>
			N°:
			<t t-esc="order.sii_document_number" />
			<br />
		</t>
		<br />
	</t>

	<t t-name="PosTicketInvoiceHeader">
		<div style="text-align:center;">
			<div class="row">
				<div
					style="border: 3px solid; text-align: center;font-size: 16px;height:3.8cm; width:7.5cm;">
					<b>
						R.U.T.:
						<b style="font-size:16px;font-family:Arial;" t-esc="widget.pos.company.document_number" />
					</b>
					<br />
					<b t-if="receipt.nombre_documento">
						<b t-esc="receipt.nombre_documento"
							style="padding-top:20px;font-size:16px;text-align:center;text-transform:uppercase;font-family:Arial;" />
					</b>
					<br />
					<br />
					<b t-if="order.sii_document_number">
						N°
						<b style="text-align: center;font-size:16px;font-family:Arial;"
							t-esc="order.sii_document_number" />
					</b>
					<br />
					<br />
				</div>
				<div class="row"
					style="text-align: center; margin-top:0px !important; padding-top:5px!important;">
					<b style="text-align:center;font-size:11px;text-transform:uppercase;">
						<b>SII -</b>
						<b
							t-esc="widget.pos.company.sii_regional_office_id and widget.pos.company.sii_regional_office_id[1] or ''" />
					</b>
				</div>
				<div class="row" style="text-align: left; font-weight: bold;">
					<strong t-esc="widget.pos.company.name" />
				</div>
			</div>
		</div>
		<strong>Casa Matriz: </strong>
		<t t-esc="widget.pos.company.street" />
		<t t-esc="widget.pos.company.city || ''" />
		<br />
		<strong>Giro: </strong>
		<t t-esc="widget.pos.company.activity_description[1]" />
		<t
			t-if="widget.pos.config.address_street or widget.pos.config.address_city">
			<br />
			<strong>Sucursal: </strong>
			<span
				t-esc="widget.pos.config.address_street and widget.pos.config.address_street or ''" />
			.
			<span
				t-esc="widget.pos.config.address_city and widget.pos.config.address_city or ''" />
		</t>
		<t t-if="widget.pos.config.caja_number">
			<br />
			<strong>Caja: </strong>
			<span t-esc="widget.pos.config.caja_number" />
		</t>
		<br />
		<br />
	</t>

	<t t-name="PosTicketClient">
		<div class="row">
			<t t-set="client" t-value="order.get_client()" />
			<div class="col-xs-12 text-left" t-if="client">
				<strong>Cliente: </strong>
				<span t-esc="client.name" />
				<br />
				<strong>R.U.T.: </strong>
				<span t-esc="client.document_number" />
				<br />
			</div>
		</div>
	</t>

	<t t-name="PosTicketInvoiceClient">
		<t t-set="client" t-value="order.get_client()" />
		<div class="row" t-if="client">
			<div class="col-xs-12 text-left">
				<table class='receipt-orderlines'>
					<tr>
						<td>
							<div class="row" style="text-align: left; font-weight: bold;">
								<strong>Cliente: </strong><strong t-esc="client.name" />
							</div>
						</td>
					</tr>
					<tr>
						<td>
							<b>R.U.T.:</b><span t-esc="client.document_number" />
						</td>
					</tr>
					<tr>
						<td>
							<b>Giro:</b> <span t-esc="client.activity_description and client.activity_description[1] or ''" />
						</td>
					</tr>
					<tr>
						<td>
							<b>Direccion:</b> <span t-esc="client.street" />
						</td>
					</tr>
					<tr>
						<td>
							<b>Comuna:</b> <span t-esc="client.city_id and client.city_id[1] or ''" />
						</td>
					</tr>
				</table>
			</div>
		</div>
	</t>

	<t t-name="PosTicketInvoiceReferences">
		<div class="row" t-if="receipt.referencias.length > 0">
			<br />
			<strong>Documentos de Referencia</strong>
			<table class='receipt-orderlines' style="font-size: 10px;">
				<colgroup>
					<col width='30%' />
					<col width='70%' />
				</colgroup>
				<t t-foreach="receipt.referencias" t-as="ref">
					<tr>
						<td>
							<strong>Tipo Documento: </strong>
						</td>
						<td>
							<tspan t-esc="ref.tpo_doc" />
						</td>
					</tr>
					<tr>
						<td>
							<strong>Folio: </strong>
							<tspan t-esc="ref.folio" />
						</td>
						<td>
							<strong>Fecha Documento: </strong>
							<tspan t-esc="ref.date" />
						</td>
					</tr>
					<tr>
						<td colspan='2'>
							<strong>Razón: </strong>
							<tspan t-esc="ref.razon" />
						</td>
					</tr>
				</t>
			</table>
		</div>
		<br />
		<br />
	</t>

	<t t-name="PosTicketTotals">
		<tr t-if="receipt.exento !=0">
			<td>
				<strong>Exento:</strong>
			</td>
			<td class="pos-right-align">
				<t t-esc="widget.format_currency(Math.abs(receipt.exento))" />
			</td>
		</tr>
		<tr t-if="order.get_total_discount()>0">
			<td>
				<strong>Descuento:</strong>
			</td>
			<td class="pos-right-align">
				<t t-esc="widget.format_currency(Math.abs(order.get_total_discount()))" />
			</td>
		</tr>
		<tr class="emph" style="border-top: 1px solid black !important;">
			<td>
				<strong>Total:</strong>
			</td>
			<td class="pos-right-align">
				<strong>
					<t t-esc="widget.format_currency(Math.abs(order.get_total_with_tax()))" />
				</strong>
			</td>
		</tr>
	</t>

	<t t-name="PosTicketInvoiceTotals">
		<tr style="border-top: 1px solid black !important;" t-if="(order.get_total_with_tax()-order.get_total_tax() - receipt.exento) != 0">
			<td>
				<b>Neto:</b>
			</td>
			<td class="pos-right-align">
				<t
					t-esc="widget.format_currency(Math.abs(order.get_total_with_tax()-order.get_total_tax()))" />
			</td>
		</tr>
		<tr t-if="receipt.exento !=0">
			<td>
				<b>Exento:</b>
			</td>
			<td class="pos-right-align">
				<t t-esc="widget.format_currency(Math.abs(receipt.exento))" />
			</td>
		</tr>
		<tr t-if="order.get_total_tax() != 0">
			<td>
				<b>IVA:</b>
			</td>
			<td class="pos-right-align">
				<t t-esc="widget.format_currency(Math.abs(order.get_total_tax()))" />
			</td>
		</tr>
		<tr t-if="order.get_total_discount()>0">
			<td>
				<b>Descuento:</b>
			</td>
			<td class="pos-right-align">
				<t t-esc="widget.format_currency(Math.abs(order.get_total_discount()))" />
			</td>
		</tr>
		<tr>
			<td>
				<b>Total:</b>
			</td>
			<td class="pos-right-align">
				<b>
					<t t-esc="widget.format_currency(Math.abs(order.get_total_with_tax()))" />
				</b>
			</td>
		</tr>
	</t>

	<t t-name="PosTicketPayments">
		<tr t-if="paymentlines.length > 0">
			<td colspan="2" style="border-bottom: 1px solid black !important;">
				<strong>Forma de Pago</strong>
			</td>
		</tr>
		<t t-foreach="paymentlines" t-as="line">
			<tr>
				<td>
					<t t-esc="line.name" />
					<t t-if="line.payment_ref">
						<span style="font-style: italic; font-size:8px;">
							C.A.:
							<t t-esc="line.payment_ref" />
						</span>
					</t>
				</td>
				<td class="pos-right-align">
					<t t-esc="widget.format_currency(Math.abs(line.get_amount()))" />
				</td>
			</tr>
		</t>
	</t>

	<t t-name="PosTicketInvoiceCedible">
		<div class="row">
			<br />
			<div style="border: 1px solid black; padding: 3px;">
				<table class='receipt-orderlines' style="font-size: 10px; line-height: 20px;">
					<colgroup>
						<col width='15%' />
						<col width='35%' />
						<col width='15%' />
						<col width='35%' />
					</colgroup>
					<tr>
						<td>
							<strong>Nombre: </strong>
						</td>
						<td colspan="3">
							________________________________________________
						</td>
					</tr>
					<tr>
						<td>
							<strong>R.U.T.: </strong>
						</td>
						<td>___________________</td>
						<td>
							<strong>Firma: </strong>
						</td>
						<td>___________________</td>
					</tr>
					<tr>
						<td>
							<strong>Fecha: </strong>
						</td>
						<td>___________________</td>
						<td>
							<strong>Recinto: </strong>
						</td>
						<td>___________________</td>
					</tr>
					<tr>
						<td colspan="4">
							<div style="border-top: 1px solid black; line-height: 10px;">
								<p style="font-size:8px">
									El acuse de recibo que se declara en este acto, de
									acuerdo a lo
									dispuesto en la letra b) del Artículo 4°, y la letra
									c) del Artículo 5° de la Ley 19.983, acredita que la entrega de
									mercaderías o servicio(s) prestado(s) ha(n) sido recibido(s)
								</p>
							</div>
						</td>
					</tr>
				</table>
			</div>
		</div>
		<br />
		<br />
	</t>
	
	<t t-name="PosTicketSiiBarcode">
		<div class="col-xs-12" t-if="receipt.barcode">
			<img t-att-src="receipt.barcode" style="width:100%;height: 150px;" />
		</div>
		<div class="col-xs-12" t-if="receipt.barcode">
			<p style="text-align:center;color:red; font-size:8px;">
				Timbre Electrónico SII
				<br />
				Resolución Exenta SII Nº
				<span t-esc="widget.pos.company.dte_resolution_number" />
				del
				<span t-esc="widget.pos.company.dte_resolution_date.slice(0, 4)" />
				<br />
				Verifique documento:
				<t
					t-esc="(widget.pos.company.website_portal_boletas or widget.pos.company.website or '') + '/boleta'" />
			</p>
		</div>
	</t>

	<t t-name="PosTicketInvoiceSiiBarcode">
		<div class="col-xs-12" t-if="receipt.barcode">
			<img t-att-src="receipt.barcode" style="width:100%;height: 150px;" />
		</div>
		<div class="col-xs-12" t-if="receipt.barcode">
			<p style="text-align:center;color:red; font-size:8px;">
				Timbre Electrónico SII
				<br />
				Res
				<span t-esc="widget.pos.company.dte_resolution_number" />
				del
				<span t-esc="widget.pos.company.dte_resolution_date.slice(0, 4)" />
				<br />
				Verifique documento: www.sii.cl
			</p>
		</div>
	</t>

	<t t-extend="PosTicket">
		<t t-jquery="div" t-operation="replace">
			<t t-set="document_class" t-value="order.get_document_class()" />
			<t t-set="iter_data" t-value="[1]" />
			<t t-if="document_class.sii_code == 33">
				<t t-set="iter_data" t-value="[2, 1]" />
			</t>
			<t t-foreach="iter_data" t-as="i_data">
			<div class="pos-sale-ticket">
				<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
					<t t-call="PosTicketHeader" />
				</t>
				<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
					<t t-call="PosTicketInvoiceHeader" />
				</t>
				<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
					<t t-call="PosTicketClient" />
				</t>
				<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
					<t t-call="PosTicketInvoiceClient" />
					<br />
					<strong>Fecha de emision: </strong>
					<span t-esc="order.formatted_validation_date" />
				</t>
				<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
					<t t-call="PosTicketInvoiceReferences" />
				</t>
				<table class='receipt-orderlines'>
					<colgroup>
						<col width='50%' />
						<col width='25%' />
						<col width='25%' />
					</colgroup>
					<tr
						style="border-top: 1px solid black !important;border-bottom: 1px solid black !important;">
						<td>
							<strong>DESCRIPCION/CODIGO</strong>
						</td>
						<td>
							<strong>CANT./P. UNIT.</strong>
						</td>
						<td>
							<strong>VALOR</strong>
						</td>
					</tr>
					<tr t-foreach="orderlines" t-as="orderline">
						<td>
							<t t-esc="orderline.get_product().display_name" />
						</td>
						<td class="pos-right-align">
							<t t-esc="orderline.get_quantity_str_with_unit()" />
							x
							<t t-if="order.pricelist.discount_policy === 'without_discount'">
								<t t-if="Math.abs(orderline.get_unit_display_price()) > orderline.get_product().lst_price">
									<t t-esc="widget.format_currency(Math.abs(orderline.get_unit_display_price()))" />
								</t>
								<t t-else="">
									<t t-esc="widget.format_currency(Math.abs(orderline.get_product().lst_price))" />
								</t>
							</t>
							<t t-else="">
								<t t-esc="widget.format_currency(Math.abs(orderline.get_unit_display_price()))" />
							</t>
							<t t-if="orderline.get_discount_value() > 0">
								<div class="pos-disc-font">
									Desc
									<t t-esc="widget.format_currency(orderline.get_discount_value() * orderline.get_quantity())" />
								</div>
							</t>
						</td>
						<td class="pos-right-align">
							<t t-esc="widget.format_currency(Math.abs(orderline.get_display_price()))" />
						</td>
					</tr>
				</table>
				<br />
				<table class='receipt-total'>
					<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
						<t t-call="PosTicketTotals" />
					</t>
					<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
						<t t-call="PosTicketInvoiceTotals" />
					</t>
				</table>
				<br />
				<table class='receipt-paymentlines'>
					<t t-call="PosTicketPayments" />
				</table>
				<br />
				<table class='receipt-change' t-if="order.get_change()>0">
					<tr>
						<td>Vuelto:</td>
						<td class="pos-right-align">
							<t t-esc="widget.format_currency(order.get_change())" />
						</td>
					</tr>
				</table>
				<div class="receipt-user">
					<br />
					Vendedor:
					<t
						t-esc="widget.pos.get_cashier().name" />
				</div>
				<br />
				<div class="row pos_barcode">
					<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
						<t t-call="PosTicketSiiBarcode" />
					</t>
					<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
						<t t-if="i_data==2">
							<t t-call="PosTicketInvoiceCedible" />
						</t>
						<t t-call="PosTicketInvoiceSiiBarcode" />
						<t t-if="i_data==2">
							<div style="float: right;">
								<span>CEDIBLE</span>
							</div>
						</t>
					</t>
				</div>
				<div class='before-footer' />
				<span>
	                <img id="barcode"/>
	            </span>
				<t t-if="receipt.footer">
					<br />
					<div style='text-align:center'>
						<t t-esc="receipt.footer" />
					</div>
				</t>
				<div class='after-footer' />
			</div>
			</t>
		</t>
	</t>

	<t t-name="XmlPosTicketHeader">
		<div align="center">
			<b>
				<t t-esc="widget.pos.company.name" />
			</b>
			<br />
			<b>
				R.U.T.:
				<t t-esc="widget.pos.company.document_number" />
			</b>
			<t t-if="receipt.header">
				<br />
				<div align="center">
					<t t-esc="receipt.header" />
				</div>
			</t>
		</div>
		<div align="left">
			<b>Casa Matriz: </b>
			<t t-esc="widget.pos.company.street" />
			<t t-esc="widget.pos.company.city || ''" />
			<br />
			<b>Giro: </b>
			<t t-esc="widget.pos.company.activity_description[1]" />
			<t
				t-if="widget.pos.config.address_street or widget.pos.config.address_city">
				<br />
				<b>Sucursal: </b>
				<span
					t-esc="widget.pos.config.address_street and widget.pos.config.address_street or ''" />
				.
				<span
					t-esc="widget.pos.config.address_city and widget.pos.config.address_city or ''" />
			</t>
			<t t-if="widget.pos.config.caja_number">
				<br />
				<b>Caja: </b>
				<span t-esc="widget.pos.config.caja_number" />
			</t>
			<br />
			<b>Fecha: </b>
			<span t-esc="order.formatted_validation_date" />
			<br />
			<b>
				<t t-esc="receipt.nombre_documento" />
			</b>
			N°:
			<t t-esc="order.sii_document_number" />
			<br />
			<br />
		</div>
	</t>
	
	<t t-name="XmlPosTicketHeaderInvoice">
		<div align="center">
			<b>
				R.U.T.:
				<t t-esc="widget.pos.company.document_number" />
			</b>
			<br />
			<b>
				<t t-esc="receipt.nombre_documento" />
			</b>
			<br />
			N°
			<t t-esc="order.sii_document_number" />
			<br />
			<br />
			<b style="text-align:center;font-size:11px;text-transform:uppercase;">
				<b>SII -</b>
				<b
					t-esc="widget.pos.company.sii_regional_office_id and widget.pos.company.sii_regional_office_id[1] or ''" />
			</b>
			<br />
			<t t-if="receipt.header">
				<div align="center">
					<t t-esc="receipt.header" />
				</div>
			</t>
		</div>
		<div align="left">
			<b><t t-esc="widget.pos.company.name" /></b>
			<br />
			<b>Casa Matriz: </b>
			<t t-esc="widget.pos.company.street" />
			<t t-esc="widget.pos.company.city || ''" />
			<br />
			<b>Giro: </b>
			<t t-esc="widget.pos.company.activity_description[1]" />
			<t
				t-if="widget.pos.config.address_street or widget.pos.config.address_city">
				<br />
				<b>Sucursal: </b>
				<span
					t-esc="widget.pos.config.address_street and widget.pos.config.address_street or ''" />
				.
				<span
					t-esc="widget.pos.config.address_city and widget.pos.config.address_city or ''" />
			</t>
			<t t-if="widget.pos.config.caja_number">
				<br />
				<b>Caja: </b>
				<span t-esc="widget.pos.config.caja_number" />
			</t>
			<br />
		</div>
	</t>
	
	<t t-name="XmlPosTicketClient">
		<div align="left">
			<t t-set="client" t-value="receipt.client" />
			<t t-if="client">
				<b>Cliente: </b>
				<span t-esc="client.name" />
				<br />
				<b>R.U.T.: </b>
				<span t-esc="client.document_number" />
				<br />
			</t>
		</div>
	</t>
	
	<t t-name="XmlPosTicketClientInvoice">
		<div align="left">
			<t t-set="client" t-value="receipt.client" />
			<t t-if="client">
				<br />
				<b>Cliente: </b><t t-esc="client.name" />
				<br />
				<b>R.U.T.: </b>
				<span t-esc="client.document_number" />
				<br />
				<b>Giro: </b>
				<span t-esc="client.activity_description and client.activity_description[1] or ''" />
				<br />
				<b>Direccion: </b>
				<span t-esc="client.street" />
				<br />
				<b>Comuna: </b>
				<span t-esc="client.city_id and client.city_id[1] or ''" />
				<br />
			</t>
		</div>
	</t>
	
	<t t-name="XmlPosTicketTotals">
		<t t-if="receipt.exento !=0">
			<line>
				<left>
					<b>Exento:</b>
				</left>
				<right align="right">
					<value value-symbol="$">
						<t t-esc="receipt.exento" />
					</value>
				</right>
			</line>
		</t>
		<t t-if="receipt.total_discount>0">
			<line>
				<left>
					<b>Descuento:</b>
				</left>
				<right align="right">
					<value value-symbol="$">
						<t t-esc="receipt.total_discount" />
					</value>
				</right>
			</line>
		</t>
		<line class='total'>
			<left>
				<b>Total:</b>
			</left>
			<right align="right">
				<value value-symbol="$">
					<t t-esc="receipt.total_with_tax" />
				</value>
			</right>
		</line>
	</t>
	
	<t t-name="XmlPosTicketTotalsInvoice">
		<line>
			<left>
				<b>Neto:</b>
			</left>
			<right align="right">
				<value value-symbol="$">
					<t t-esc="Math.abs(order.get_total_with_tax()-order.get_total_tax())" />
				</value>
			</right>
		</line>
		<t t-if="receipt.exento !=0">
			<line>
				<left>
					<b>Exento:</b>
				</left>
				<right align="right">
					<value value-symbol="$">
						<t t-esc="receipt.exento" />
					</value>
				</right>
			</line>
		</t>
		<line>
			<left>
				<b>IVA:</b>
			</left>
			<right align="right">
				<value value-symbol="$">
					<t t-esc="Math.abs(order.get_total_tax())" />
				</value>
			</right>
		</line>
		<t t-if="receipt.total_discount>0">
			<line>
				<left>
					<b>Descuento:</b>
				</left>
				<right align="right">
					<value value-symbol="$">
						<t t-esc="receipt.total_discount" />
					</value>
				</right>
			</line>
		</t>
		<line class='total'>
			<left>
				<b>Total:</b>
			</left>
			<right align="right">
				<value value-symbol="$">
					<t t-esc="receipt.total_with_tax" />
				</value>
			</right>
		</line>
	</t>
	
	<t t-name="XmlPosTicketInvoiceCedible">
		<div class="row">
			<br />
			<b>Nombre: </b><t t-esc="'_________________________________'" />
			<br />
			<b>R.U.T.: </b><t t-esc="'____________'" /><b>Firma: </b><t t-esc="'____________'" />
			<br />
			<b>Fecha: </b><t t-esc="'____________'" /><b>Recinto: </b><t t-esc="'____________'" />
			<br />
			<hr></hr>
			<t t-esc="'El acuse de recibo que se declara en este acto, de
				acuerdo a lo dispuesto en la letra b) del Artículo 4°, y la letra
				c) del Artículo 5° de la Ley 19.983, acredita que la entrega de
				mercaderías o servicio(s) prestado(s) ha(n) sido recibido(s)'" />
			<br /><br />
		</div>
		<br />
		<br />
	</t>

	<t t-name="XmlPosTicketSiiBarcode">
		<div align="center">
			<img t-att-src="receipt.barcode" style="width:100%;height: 150px;" />
		</div>
		<br />
		<div align="center">
			<p color="red">
				Timbre Electrónico SII
				<br />
				Resolución Exenta SII N
				<span t-esc="widget.pos.company.dte_resolution_number" />
				del
				<span t-esc="widget.pos.company.dte_resolution_date.slice(0, 4)" />
				<br />
				Verifique doc.:
				<span t-esc="(widget.pos.company.website_portal_boletas or widget.pos.company.website or '') + '/boleta'" />
			</p>
		</div>
	</t>
	
	<t t-name="XmlPosTicketSiiBarcodeInvoice">
		<div align="center">
			<img t-att-src="receipt.barcode" style="width:100%;height: 150px;" />
		</div>
		<br />
		<div align="center">
			<p color="red">
				Timbre Electrónico SII
				<br />
				Resolución N°
				<span t-esc="widget.pos.company.dte_resolution_number" />
				del
				<span t-esc="widget.pos.company.dte_resolution_date.slice(0, 4)" />
				<br />
				Verifique documento: www.sii.cl
			</p>
		</div>
	</t>

	<t t-extend="XmlReceipt">
		<t t-jquery="receipt" t-operation="replace">
			<receipt align='left' width='40' value-thousands-separator='.'
				value-symbol-position='before' value-decimals='0'>
				<t t-set="document_class" t-value="order.get_document_class()" />
				<t t-set="iter_data" t-value="[1]" />
				<t t-if="document_class.sii_code == 33">
					<t t-set="iter_data" t-value="[2, 1]" />
				</t>
				<t t-foreach="iter_data" t-as="i_data">
				<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
					<t t-call="XmlPosTicketHeader" />
				</t>
				<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
					<t t-call="XmlPosTicketHeaderInvoice" />
				</t>
				<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
					<t t-call="XmlPosTicketClient" />
				</t>
				<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
					<t t-call="XmlPosTicketClientInvoice" />
					<br />
					<b>Fecha de emision: </b>
					<span t-esc="order.formatted_validation_date" />
					<br />
				</t>
				<hr></hr>
				<div class='orderlines' line-ratio='0.6'>
					<div align="left">
						<b>DESCRIPCION/CODIGO|CANT./P.UNIT.|VALOR</b>
					</div>
					<hr></hr>
					<t t-foreach="receipt.orderlines" t-as="line">
						<t t-set='simple'
							t-value='line.discount === 0 and line.unit_name === "Unit(s)" and line.quantity === 1' />
						<t t-if='simple'>
							<line>
								<left>
									<t t-esc='line.product_name_wrapped[0]' />
								</left>
								<right>
									<value t-att-value-decimals='pos.currency.decimals'>
										<t t-esc='line.price_display' />
									</value>
								</right>
							</line>
							<t t-call="XmlReceiptWrappedProductNameLines" />
						</t>
						<t t-if='!simple'>
							<line>
								<left>
									<t t-esc="line.product_name" />
								</left>
							</line>
							<line indent='1'>
								<left>
									<value>
										<t t-esc="line.quantity" />
									</value>
									x
									<value>
										<t t-esc="line.price" />
									</value>
								</left>
								<t t-if='line.discount_value > 0'>
									<left>
										Desc
										<t t-esc="line.discount_value * line.quantity" />
									</left>
								</t>
								<right align="right">
									<value value-symbol="$">
										<t t-esc="line.price_display" />
									</value>
								</right>
							</line>
						</t>
					</t>
				</div>
				<br />
				<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
					<t t-call="XmlPosTicketTotals" />
				</t>
				<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
					<t t-call="XmlPosTicketTotalsInvoice" />
				</t>
				<line>
					<b>Forma de Pago</b>
				</line>
				<t t-foreach="receipt.paymentlines" t-as="line">
					<line>
						<left>
							<t t-esc="line.journal" />
							<t t-if="line.payment_ref">
								<span style="font-style: italic; font-size:8px;">
									C.A.:
									<t t-esc="line.payment_ref" />
								</span>
							</t>
						</left>
						<right align="right">
							<value value-symbol="$">
								<t t-esc="line.amount" />
							</value>
						</right>
					</line>
				</t>
				<br />
				<line>
					<left>Vuelto:</left>
					<right align="right">
						<value value-symbol="$">
							<t t-esc="receipt.change" />
						</value>
					</right>
				</line>

				<br />
				<div class='cashier'>
					Vendedor:
					<t
						t-esc="receipt.cashier" />
				</div>
				<br />
				
				<t t-if="!(_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code))">
					<t t-call="XmlPosTicketSiiBarcode" />
				</t>
				<t t-if="_.contains([29, 30, 32, 33, 34, 40, 43, 45, 46, 55, 56, 60, 61], document_class.sii_code)">
					<t t-if="i_data==2">
						<t t-call="XmlPosTicketInvoiceCedible" />
					</t>
					<t t-call="XmlPosTicketSiiBarcodeInvoice" />
					<t t-if="i_data==2">
						<div align="right">
							<t t-esc="'CEDIBLE'" />
						</div>
					</t>
				</t>
				<br />
				<div class='before-footer' />
				<img id="barcode"/>
				<!-- Footer -->
				<t t-if='receipt.footer_xml'>
					<t t-raw='receipt.footer_xml' />
				</t>
				<t t-if='!receipt.footer_xml and receipt.footer'>
					<br />
					<div align="center">
						<t t-esc='receipt.footer' />
					</div>
					<br />
				</t>
				<div class='after-footer' />
				<br />
				<br /><br /><br />
				</t>
			</receipt>
		</t>
	</t>

</templates>
