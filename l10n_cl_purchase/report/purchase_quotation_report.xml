<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	
	<template id="dusal_purchase.report_purchasequotation_document_dusal" inherit_id="purchase.report_purchasequotation_document">
	    <xpath expr="//div[hasclass('page')]/table[hasclass('table', 'table-sm')]" position="before">
	        <t t-set="number" t-value="0"/>
	    </xpath>
	    <xpath expr="//div[hasclass('page')]/table[hasclass('table', 'table-sm')]/thead/tr/th" position="before">
	        <th t-if="o.print_line_number"><strong>No.</strong></th>
	        <div t-if="o.print_image">
	            <th><strong>Image</strong></th>
	        </div>
	    </xpath>
	    <xpath expr="//div[hasclass('page')]/table[hasclass('table', 'table-sm')]/tbody/tr/td" position="before">
	        <td t-if="o.print_line_number">
	            <t t-set="number" t-value="number+1"/>
	            <span t-esc="number"/>
	        </td>
	        <div t-if="o.print_image">
	            <td>
	                <span t-if="o.image_size == 'small'"><img t-if="l['product_image_small']" t-att-src="'data:image/png;base64,%s' % to_text(l['product_image_small'])" width="32" height="32"/></span>
	                <span t-if="o.image_size == 'medium'"><img t-if="l['product_image_medium']" t-att-src="'data:image/png;base64,%s' % to_text(l['product_image_medium'])" width="64" height="64"/></span>
	                <span t-if="o.image_size == 'original'"><img t-if="l['product_image']" t-att-src="'data:image/png;base64,%s' % to_text(l['product_image'])" width="128" height="128"/></span>
	            </td>
	        </div>
	    </xpath>
	</template>

	<template id="report_purchasequotation_document" inherit_id="purchase.report_purchasequotation_document"
		priority="10">
		<xpath expr="//div[hasclass('page')]" position="attributes">
			<attribute name="style">font-size:10px;</attribute>
		</xpath>
		<xpath expr="//tr[@t-foreach='o.order_line']/../.." position="replace">
			<t t-set="quantity_total" t-value="0" />
			<table class="table table-sm"
				style="padding:10px;">
				<thead>
					<tr>
						<th style="min-width:75px;max-width:75px;">CÃ³digo</th>
						<th style="min-width:125px;max-width:125px;">Detalle</th>
						<t t-if="show_atributes_on_reports== 'show_attributes'">
							<th class="text-center" groups="product.group_product_variant">Color</th>
							<th class="text-center" groups="product.group_product_variant">Tallas</th>
						</t>
						<th>Fecha Prevista</th>
						<th>Cantidad</th>
					</tr>
				</thead>
				<tbody>
					<tr t-foreach="get_lines(o)" t-as="l" style="font-size:10px;">
						<t t-set="quantity_total" t-value="quantity_total+l['quantity']" />
						<td>
							<span t-esc="l['default_code']" />
						</td>
						<td
							style="min-width:125px;max-width:125px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">
							<span t-esc="l['name']" />
						</td>
						<t t-if="show_atributes_on_reports== 'show_attributes'">
							<td>
								<span t-esc="l['color']" />
							</td>
							<td>
								<span t-raw="', '.join(l['attributes'])" />
							</td>
						</t>
						<td>
							<span t-esc="l['date_planned']" />
						</td>
						<td class="text-right">
							<span t-esc="l['quantity']"
								t-options="{'widget': 'float', 'decimal_precision': 'Product Unit of Measure'}" />
							<span t-esc="l['product_uom']" groups="uom.group_uom"/>
						</td>
					</tr>
				</tbody>
				<tfoot t-if="o.company_id.print_total_qty_reports">
					<tr class="row-no-bordered">
						<td t-if="o.print_line_number"></td>
						<td t-if="o.print_image"></td>
						<td></td>
						<td></td>
						<t t-if="show_atributes_on_reports== 'show_attributes'">
							<td groups="product.group_product_variant"></td>
							<td groups="product.group_product_variant"></td>
						</t>
						<td class="text-right row-no-bordered">Total:</td>
						<td class="text-right row-no-bordered">
							<span t-esc="quantity_total"
								t-options="{'widget': 'float', 'decimal_precision': 'Product Unit of Measure'}"/>
						</td>
					</tr>
				</tfoot>
			</table>
		</xpath>
	</template>
</odoo>