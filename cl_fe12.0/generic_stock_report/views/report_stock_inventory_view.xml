<?xml version="1.0" encoding="UTF-8"?>
<odoo>

	<record id="report_stock_inventory_tree_view" model="ir.ui.view">
		<field name="name">report.stock.inventory.tree</field>
		<field name="model">report.stock.inventory</field>
		<field name="arch" type="xml">
			<tree create="0" delete="0" edit="0">
				<field name="inventory_id" />
				<field name="location_id" />
				<field name="product_id" />
				<field name="date" />
				<field name="theoretical_qty" />
				<field name="product_qty" />
				<field name="price_subtotal" sum="Costo Total" />
				<field name="package_id" groups="stock.group_tracking_lot" />
				<field name="prod_lot_id" groups="stock.group_production_lot" />
				<field name="state" />
			</tree>
		</field>
	</record>
	<record id="report_stock_inventory_form_view" model="ir.ui.view">
		<field name="name">report.stock.inventory.form</field>
		<field name="model">report.stock.inventory</field>
		<field name="arch" type="xml">
			<form create="0" delete="0" edit="0">
				<header>
					<field name="state" widget="statusbar" />
				</header>
				<sheet>
					<group>
						<group>
							<field name="inventory_id" />
							<field name="product_id" options="{'no_open': True}" />
							<field name="theoretical_qty" />
							<field name="price_subtotal" />
							<field name="package_id" options="{'no_open': True}"
								groups="stock.group_tracking_lot" />
						</group>
						<group>
							<field name="location_id" options="{'no_open': True}" />
							<field name="date" />
							<field name="product_qty" />
							<field name="prod_lot_id" options="{'no_open': True}"
								groups="stock.group_production_lot" />
						</group>
					</group>
				</sheet>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="report_stock_inventory_graph_view">
		<field name="name">report.stock.inventory.graph</field>
		<field name="model">report.stock.inventory</field>
		<field name="arch" type="xml">
			<graph>
				<field name="location_id" type="row" />
				<field name="product_categ_id" type="row" />
				<field name="diff_qty" type="measure" />
			</graph>
		</field>
	</record>

	<record model="ir.ui.view" id="report_stock_inventory_pivot_view">
		<field name="name">report.stock.inventory.pivot</field>
		<field name="model">report.stock.inventory</field>
		<field name="arch" type="xml">
			<pivot>
				<field name="location_id" type="row" />
				<field name="date" interval="month" type="col" />
				<field name="theoretical_qty" type="measure" />
				<field name="product_qty" type="measure" />
				<field name="diff_qty" type="measure" />
				<field name="price_subtotal" type="measure" />
			</pivot>
		</field>
	</record>

	<record model="ir.ui.view" id="report_stock_inventory_search_view">
		<field name="name">report.stock.inventory.search</field>
		<field name="model">report.stock.inventory</field>
		<field name="arch" type="xml">
			<search string="Ajustes de Inventario">
				<field name="date" widget="date" />
				<field name="location_id" />
				<field name="inventory_id" />
				<field name="partner_id" groups="stock.group_tracking_owner" />
				<field name="package_id" groups="stock.group_tracking_lot" />
				<field name="prod_lot_id" groups="stock.group_production_lot" />
				<field name="product_id" />
				<field name="product_template_id" />
				<field name="product_categ_id" />
				<field name="company_id" groups="base.group_multi_company" />
				<field name="state" />
				<group name="filter_by" string="Filtros">
					<filter name="this_month" string="Fecha" date="date" />
					<separator />
					<filter string="Borrador " name="filter_by_draft" domain="[('state','=','draft')]" />
					<filter string="En Progreso" name="filter_by_confirm"
						domain="[('state','=','confirm')]" />
					<filter string="Validado" name="filter_by_done" domain="[('state','=','done')]" />
				</group>
				<group name="group_by" string="Agrupar por">
					<filter name="group_by_date" string="Fecha" context="{'group_by': 'date'}" />
					<separator />
					<filter name="group_by_location_id" string="Bodega"
						context="{'group_by': 'location_id'}" />
					<filter name="group_by_product_id" string="Producto"
						context="{'group_by': 'product_id'}" />
					<filter name="group_by_product_categ_id" string="Categoria de Producto"
						context="{'group_by': 'product_categ_id'}" />
					<filter name="group_by_state" string="Estado" context="{'group_by': 'state'}" />
					<filter name="group_by_company_id" string="CompaÃ±ia"
						context="{'group_by': 'company_id'}" groups="base.group_multi_company" />
				</group>
			</search>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_report_stock_inventory_graph_view">
		<field name="name">Ajustes de Inventario</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">report.stock.inventory</field>
		<field name="view_type">form</field>
		<field name="view_mode">pivot,graph</field>
		<field name="context">{'search_default_filter_by_done': 1,'search_default_this_month': 1}</field>
		<field name="view_id" ref="report_stock_inventory_pivot_view" />
		<field name="search_view_id" ref="report_stock_inventory_search_view" />
	</record>

	<menuitem id="report_stock_inventory_menu" parent="stock.menu_warehouse_report"
		action="action_report_stock_inventory_graph_view" groups="generic_stock.group_stock_report" sequence="10" />

</odoo>