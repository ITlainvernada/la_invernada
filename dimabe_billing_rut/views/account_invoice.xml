<odoo>
    <data>
        <record id="xdte_invoice_form" model="ir.ui.view">
            <field name="name">xdte account invoice</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                    <button name="send_invoice"  string="Test Json"  type="object"/>
                 </xpath>
                 <xpath expr="//field[@name='invoice_line_ids']/tree//field[@name='invoice_line_tax_ids']" position="after">
                    <field name="exempt"/>
                 </xpath>
                <data>
                    <xpath expr="//form[1]/sheet[1]/notebook[1]" position="inside">
                        <page name="xdte_tab" string="DTE">
                            <group name="xdte_info" cols="">
                                <button  type="object" name="send_to_sii" string="Enviar al SII" attrs="{'invisible': ['|',('dte_folio', '!=', False),('state','=','draft')]}" class="oe_highlight"/>
                                <field name="method_of_payment" attrs="{'readonly': [('dte_folio', '!=', False)]}"/>
                                <field name="partner_activity_id" domain="[('id','in',partner_economic_activities)]"/>
                                <field name="partner_economic_activities" invisible="1"/>
                                <field name="company_economic_activities" invisible="1"/>
                                <field name="company_activity_id" domain="[('id','in',company_economic_activities)]" />
                                <field name="dte_folio" readonly="1"/>
                                <field name="dte_type" invisible="1"/>
                                <!--<field name="dte_type_id" domain="[('code', 'in', [33,34,39,110,56,61,111,112]) , ('id','in','dte_type')]" attrs="{'readonly': [('dte_folio', '!=', False)]}"/>-->
                                <field name="dte_type_id" domain="[('code', 'in', [33,34,39,110,56,61,111,112]),('id','in',dte_type)]" attrs="{'readonly': [('dte_folio', '!=', False)]}"/> 
                                <field name="ted" widget="image"  readonly="1"/>
                                <field name="pdf_url" widget="url" readonly="1" text="Url de Descarga"/>
                                <field name="dte_xml" widget="binary" readonly="1" filename="dte.xml" />
                                <field name="dte_pdf" widget="binary" readonly="1" filename="dte.pdf" />
                            </group>
                            <group string="Referencias">
                                <field name="references" mode="tree">
                                <form>
                                    <group>
                                    <field name="folio_reference" required="True"/>
                                    <field name="document_type_reference_id" required="True" />
                                    <field name="code_reference"/>
                                    <field name="reason"/>
                                    <field name="document_date"/>
                                    </group>
                                </form>
                                <tree>
                                    <field name="folio_reference" required="True"/>
                                    <field name="document_type_reference_id" required="True" />
                                    <field name="code_reference"/>
                                    <field name="reason"/>
                                    <field name="document_date"/>
                                </tree>
                                </field>
                            </group>
                            <group string="Observaciones">
                                <field name="observations_ids" mode="tree">
                                    <form>
                                        <field name="observations"/>
                                    </form>
                                    <tree>
                                        <field name="observations"/>
                                    </tree>
                                </field>
                            </group>
                        </page>
                    </xpath>
                </data>
            </field>
        </record>
        <record id="xdte_invoice_form_supplier" model="ir.ui.view">
            <field name="name">xdte account invoice supplier</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_supplier_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='invoice_line_ids']/tree//field[@name='invoice_line_tax_ids']" position="after">
                    <field name="exempt"/>
                 </xpath>
                 <xpath expr="//header" position="inside">
                    <button name="send_invoice"  string="Test Json"  type="object"/>
                 </xpath>
                <data>
                    <xpath expr="//form[1]/sheet[1]/notebook[1]" position="inside">
                        <page name="xdte_tab" string="DTE">
                            <group name="xdte_info" cols="">
                                <button  type="object" name="send_to_sii" string="Enviar al SII" attrs="{'invisible': ['|',('dte_folio', '!=', False),('state','=','draft')]}" class="oe_highlight"/>
                                <field name="method_of_payment" attrs="{'readonly': [('dte_folio', '!=', False)]}"/>
                                <field name="partner_activity_id" domain="[('id','in',partner_economic_activities)]"/>
                                <field name="partner_economic_activities" invisible="1"/>
                                <field name="company_economic_activities" invisible="1"/>
                                <field name="company_activity_id" domain="[('id','in',company_economic_activities)]" />
                                <field name="dte_folio" readonly="1"/>
                                <field name="dte_type" invisible="1"/>
                                <!--<field name="dte_type_id" domain="[('code', 'in', [33,34,39,110,56,61,111,112]) ('id','in','dte_type')]" attrs="{'readonly': [('dte_folio', '!=', False)]}"/>-->
                                <field name="dte_type_id" domain="[('code', 'in', [33,34,39,110,56,61,111,112]),('id','in',dte_type)]" attrs="{'readonly': [('dte_folio', '!=', False)]}"/>
                                <field name="ted" widget="image"  readonly="1"/>
                                <field name="pdf_url" widget="url" readonly="1" text="Url de Descarga"/>
                                <field name="dte_xml" widget="binary" readonly="1" filename="dte.xml" />
                                <field name="dte_pdf" widget="binary" readonly="1" filename="dte.pdf" />
                            </group>
                            <group string="Referencias">
                                <field name="references" mode="tree">
                                <form>
                                    <group>
                                        <field name="line_number" required="True"/>
                                        <field name="folio_reference" required="True"/>
                                        <field name="document_type_reference_id" required="True" />
                                        <field name="code_reference"/>
                                        <field name="reason"/>
                                        <field name="document_date"/>
                                    </group>
                                </form>
                                <tree>
                                    <field name="line_number" required="True"/>
                                    <field name="folio_reference" required="True"/>
                                    <field name="document_type_reference_id" required="True" />
                                    <field name="code_reference"/>
                                    <field name="reason"/>
                                    <field name="document_date"/>
                                </tree>
                                </field>
                            </group>
                            <group string="Observaciones">
                                <field name="observations_ids" mode="tree">
                                    <form>
                                        <field name="observations"/>
                                    </form>
                                    <tree>
                                        <field name="observations"/>
                                    </tree>
                                </field>
                            </group>
                        </page>
                    </xpath>
                </data>
            </field>
        </record>
    </data>
</odoo>