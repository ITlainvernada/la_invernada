<odoo>
  <template id="manufacturing_pallet_label_report">
    <t t-call="web.html_container">
      <div class="page">
        <t t-foreach="docs" t-as="o">

          <table style="text-align:left;">
            <tr>
              <th style="text-align:center;">
                <h2>PALLET</h2>
              </th>
              <td style="text-align: right !important;">
                <h2>
                  <span t-field="o.name"/>
                </h2>
              </td>
            </tr>
            <tr>
              <th colspan="2">
                <h2>
                  <span t-field="o.product_id.name"/>
                </h2>
              </th>
            </tr>
            <tr>
              <th>Productor</th>
              <td>:
                <span t-field="o.producer_id.name"/>
              </td>
            </tr>
            <tr>
              <th>Nro CSG</th>
              <td>:
                <span t-field="o.sag_code"/>
              </td>
            </tr>
            <tr>
              <th>Nro Pedido</th>
              <td>
                <div t-if="o.lot_serial_ids.mapped('production_id.stock_picking_id')">
                  :
                  <span t-esc="o.lot_serial_ids.mapped('production_id.stock_picking_id')[0].name"/>
                </div>
              </td>
            </tr>
            <tr>
              <th>Cant.:Unidades</th>
              <td>:
                <span t-field="o.total_content"/>
              </td>
            </tr>
            <tr>
              <th>Kg Total</th>
              <td>:
                <span t-field="o.total_content_weight"/>
              </td>
            </tr>
            <tr>
              <th colspan="2">
                <span t-field="o.create_date"/>
              </th>
            </tr>
            <tr>
              <td colspan="2" style="text-align:center !important;">
                <br/>
                <img
                  t-att-src="'%s/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % (o.get_full_url(), 'Code128',o.name,550, 70)"
                />
                <span t-field="o.name"/>
              </td>
            </tr>
          </table>
        </t>
      </div>
    </t>
  </template>

  <report id="dimabe_manufacturing.action_manufacturing_pallet_label_report"
          string="Etiqueta Pallet"
          model="manufacturing.pallet"
          report_type="qweb-pdf"
          name="dimabe_manufacturing.manufacturing_pallet_label_report"
          paperformat="paper_format_10_x_7"
  />

  <template id="manufacturing_all_pallet_report">
    <t t-call="web.html_container">
      <div class="page">
        <t t-foreach="docs" t-as="o">
          <table style="text-align:left;">
            <tr>
              <th style="text-align:center;">
                <h2>PALLET</h2>
              </th>
              <td style="text-align: right !important;">
                <h2>
                  <span t-field="o.name"/>
                </h2>
              </td>
            </tr>
            <tr>
              <th colspan="2">
                <h2>
                  <span t-field="o.product_id.name"/>
                </h2>
              </th>
            </tr>
            <tr>
              <th>Productor</th>
              <td>:
                <span t-field="o.producer_id.name"/>
              </td>
            </tr>
            <tr>
              <th>Nro CSG</th>
              <td>:
                <span t-field="o.sag_code"/>
              </td>
            </tr>
            <tr>
              <th>Nro Pedido</th>
              <td>
                <div t-if="o.lot_serial_ids.mapped('production_id.stock_picking_id')">
                  :
                  <span t-esc="o.lot_serial_ids.mapped('production_id.stock_picking_id')[0].name"/>
                </div>
              </td>
            </tr>
            <tr>
              <th>Cant.:Unidades</th>
              <td>:
                <span t-field="o.total_content"/>
              </td>
            </tr>
            <tr>
              <th>Kg Total</th>
              <td>:
                <span t-field="o.total_content_weight"/>
              </td>
            </tr>
            <tr>
              <th colspan="2">
                <span t-field="o.create_date"/>
              </th>
            </tr>
            <tr>
              <td colspan="2" style="text-align:center !important;">
                <br/>
                <img
                  t-att-src="'%s/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % (o.get_full_url(), 'Code128',o.name,550, 70)"
                />
                <span t-field="o.name"/>
              </td>
            </tr>
          </table>
          <p style="page-break-after:always;"/>
          <t t-foreach="o.lot_serial_ids" t-as="lot_serial_id">
            <table style="font-size:14px;">
              <tr>
                <th style="border-top: solid 1px;border-bottom:solid 1px;" colspan="2">
                  <span t-field="lot_serial_id.product_id.name"/>
                </th>
              </tr>
              <tr>
                <td style="border-right:solid 1px;border-bottom:solid 1px;">
                  <div>GROWER/PRODUCTOR:</div>
                  <div>
                    <span t-field="lot_serial_id.producer_id.name"/>
                  </div>
                  <div>CSG:
                    <span t-field="lot_serial_id.producer_id.sag_code"/>
                  </div>
                  <div>PROVINCE/PROVINCIA:
                    <span t-esc="lot_serial_id.producer_id.state_id_address.name"/>
                  </div>
                  <div>TOWNSHIP/COMUNA:
                    <span t-esc="lot_serial_id.producer_id.city_address"/>
                  </div>
                  <div>REGIÓN:
                    <span t-esc="lot_serial_id.producer_id.region_address_id_address.name"/>
                  </div>
                </td>
                <td style="border-bottom:solid 1px;">
                  <div>PACKED BY/EMBALADO POR</div>
                  <div>
                    <span t-esc="res_company.name"/>
                  </div>
                  <div>CSP:
                    <span t-esc="res_company.sag_code"/>
                  </div>
                  <div>PROVINCE/PROVINCIA:
                    <span t-esc="res_company.state_id.name"/>
                  </div>
                  <div>TOWNSHIP/COMUNA:
                    <span t-esc="res_company.city"/>
                  </div>
                  <div>REGIÓN:
                    <span t-esc="res_company.region_address_id.name"/>
                  </div>
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <div>
                    VARIETY (VARIEDAD):
                    <span t-esc="lot_serial_id.product_variety"/>
                  </div>
                  <div>
                    CROP (AÑO DE COSECHA):
                    <span t-esc="lot_serial_id.harvest"/>
                  </div>
                  <div>
                    PACKAGING DATE (FECHA PRODUCCIÓN):
                    <span t-esc="lot_serial_id.packaging_date"/>
                  </div>
                  <div>
                    BEST BEFORE DATE (CONSUMIR ANTES DE):
                    <span t-esc="lot_serial_id.best_before_date"/>
                  </div>
                  <div>
                    TRACE CODE (CÓDIGO De TRAZABILIDAD):
                    <span t-esc="lot_serial_id.production_id.name"/>
                  </div>
                  <div>
                    NET WEIGHT (PESO NETO):
                    <span t-esc="lot_serial_id.display_weight"/>
                  </div>
                  <div>
                    GROSS WEIGHT (PESO BRUTO):
                    <span t-esc="lot_serial_id.gross_weight"/>
                  </div>
                  <div>
                    EXPORTED BY (EXPORTADO POR):
                    <span t-esc="res_company.name"/>
                  </div>
                  <div style="text-align:center;">
                    <img
                      t-att-src="'%s/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % (o.get_full_url(), 'Code128',lot_serial_id.serial_number,550, 45)"
                    />
                    <span t-field="lot_serial_id.serial_number"/>
                  </div>
                  <div style="text-align:center;">
                    PRODUCT OF CHILE - PRODUCTO DE CHILE
                  </div>
                </td>
              </tr>
            </table>
            <t t-if="not o.lot_serial_ids[-1].serial_number == lot_serial_id.serial_number">
              <p style="page-break-after:always;" />
            </t>
            <t t-else="">
              <p style="page-break-after:avoid;" />
            </t>
          </t>
        </t>
      </div>
    </t>
  </template>

  <report id="dimabe_manufacturing.action_all_pallet_label_report"
          string="Imprimir todas las etiquetas"
          model="manufacturing.pallet"
          report_type="qweb-pdf"
          name="dimabe_manufacturing.manufacturing_all_pallet_report"
          paperformat="paper_format_10_x_7"
  />
</odoo>