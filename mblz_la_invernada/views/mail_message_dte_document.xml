<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Inherit Form View to Modify it -->
        <record id="mblz_dte_document_view_form" model="ir.ui.view">
            <field name="name">dte.document.form</field>
            <field name="model">mail.message.dte.document</field>
            <field name="inherit_id" ref="l10n_cl_fe.dte_document_view_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='currency_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='xml']" position="after">
                    <group groups="base.group_no_one">
                        <field name="sii_barcode"/>
                        <field name="sii_barcode_img" widget="image"/>
                    </group>

                </xpath>

                <xpath expr="/form/sheet/notebook/page[3]" position="after">
                    <page name="attachment_page" string="Archivos"
                          attrs="{'invisible': [('attachment_pdf_ids', '=', [])]}"
                    >
                        <group>
                            <group>
                                <label for="attachment_pdf_ids" string="Adjuntos"/>
                                <div>
                                    <field name="attachment_pdf_ids"
                                           widget="many2many_binary" string="Attach a file" readonly="1"
                                           class="oe_inline"/>
                                </div>
                            </group>
                        </group>
                    </page>


                </xpath>


            </field>
        </record>


        <!-- add filter-->
        <record id="mblz_dte_document_search_view" model="ir.ui.view">
            <field name="name">dte.document.search</field>
            <field name="model">mail.message.dte.document</field>
            <field name="inherit_id" ref="l10n_cl_fe.dte_document_search_view"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='number']" position="after">
                    <field name="company_id"/>

                    <filter string="Compañía" name="company_user"
                            domain="[('company_id.user_ids','in',[uid])]"/>

                </xpath>

            </field>
        </record>
    </data>
</odoo>