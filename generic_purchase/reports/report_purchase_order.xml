<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<template id="report_purchaseorder_document" inherit_id="purchase.report_purchaseorder_document">
		<!-- agregar el descuento cuando al menos una linea tenga descuento -->
		<xpath expr="//tr[@t-foreach='o.order_line']/../.." position="before">
			<!-- Is there a discount on at least one line? -->
			<t t-set="display_discount" t-value="any([l.discount for l in o.order_line])" />
		</xpath>
		<xpath expr="//tr[@t-foreach='o.order_line']/../..//thead/tr//th[5]"
			position="after">
			<t t-if="display_discount">
				<th class="text-right">
					<strong>Desc.(%)</strong>
				</th>
			</t>
		</xpath>
		<xpath expr="//span[@t-field='line.price_unit']/.." position="after">
			<t t-if="display_discount">
				<td class="text-right">
					<span t-field="line.discount" />
				</td>
			</t>
		</xpath>
	</template>

</odoo>
